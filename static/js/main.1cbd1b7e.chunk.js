(this.webpackJsonpwokelordclient=this.webpackJsonpwokelordclient||[]).push([[0],{20:function(e,t,n){"use strict";n.r(t),n.d(t,"buildFloor",(function(){return i})),n.d(t,"getTower",(function(){return l})),n.d(t,"getPopulation",(function(){return m})),n.d(t,"getMoney",(function(){return f})),n.d(t,"endMonth",(function(){return h})),n.d(t,"getFloorRooms",(function(){return v})),n.d(t,"loadTowers",(function(){return w})),n.d(t,"createTower",(function(){return E})),n.d(t,"buildRoomOnFloor",(function(){return O}));var a=n(2),r=n.n(a),o=n(9),c=n(16),s="https://wokelordserver.herokuapp.com";function i(e,t){return console.log("Attempting to build a floor..."+t),t=parseInt(t),c.post(s+"/game/buildfloor/".concat(e,"/").concat(t))}function l(e){return u.apply(this,arguments)}function u(){return(u=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.get(s+"/game/loadtower/".concat(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return(p=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.get(s+"/game/getpopulation/".concat(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return d.apply(this,arguments)}function d(){return(d=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.get(s+"/game/getmoney/".concat(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.get(s+"/game/updatemonth/".concat(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return(g=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.get(s+"/game/loadrooms/".concat(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.get(s+"/game/loadtowers"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return k.apply(this,arguments)}function k(){return(k=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.post(s+"/game/createtower/".concat(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t,n,a,r,o,i){var l={roomName:n,roomType:a,maintenance:o,happiness:i,rent:r};return c.post(s+"/game/buildroom/".concat(e,"/").concat(t),l)}},24:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},38:function(e,t,n){e.exports=n(75)},43:function(e,t,n){},44:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},55:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(8),c=n.n(o),s=(n(43),n(14)),i=(n(44),n(2)),l=n.n(i),u=n(9),m=n(4),p=n(3),f=n(5),d=n(6),h=n(7),b=(n(46),n(24),function(e){for(var t=Array(),n=0;n<e.stars;n++)t.push(n);return r.a.createElement("span",null,t.map((function(e){return r.a.createElement("i",{key:e,className:"fas fa-star"})})))}),v=n(18),g=function(e){var t=Object(v.b)({config:{precision:.01},number:e.ending,from:{number:e.starting}});return r.a.createElement(v.a.span,null,t.number.interpolate((function(e){return Math.floor(e)})))},w=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={money:0},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.createElement("div",{className:"gamebar"},a.createElement("div",{className:"money gamebarItem"},a.createElement("span",null,"Funds: "),a.createElement(g,{ending:this.props.gameState.money,starting:0})),a.createElement("div",{className:"gamebarItem"},a.createElement("span",null,"Star Level: ",a.createElement(b,{stars:this.props.gameState.starLevel}))),a.createElement("div",{className:"gamebarItem"},a.createElement("span",null,"Population: "),a.createElement(g,{ending:this.props.gameState.population,starting:0})),a.createElement("button",{className:"nextmonthbutton",onClick:this.props.endMonthHandler},"Collect Rent $$$"))}}]),t}(a.Component),y=n(13),E=(n(47),function(e){var t=Object(v.b)({config:{duration:2e3},opacity:1,from:{opacity:0}});return a.createElement(v.a.div,{className:e.type,style:t})}),k=(n(48),n(93)),O=(n(49),function(e){return r.a.createElement("button",{className:"newroombutton",onClick:function(){return e.clickHandler(e.roomName,e.roomType)}},e.roomType,r.a.createElement("span",{className:"tooltiptext"},r.a.createElement("p",null,"Type: ",e.roomType),r.a.createElement("p",null,"Cost: ","office"===e.roomType?2e3:"condo"===e.roomType?500:"apartment"===e.roomType?1e3:"restaurant"===e.roomType?5e3:"hotel"===e.roomType?2500:"cleaning"===e.roomType?1e4:void 0),r.a.createElement("p",null,"Tenants: ","office"===e.roomType?8:"condo"===e.roomType?4:"apartment"===e.roomType?3:"restaurant"===e.roomType?2:"hotel"===e.roomType?1:"cleaning"===e.roomType?4:void 0)))}),j=(n(50),function(e){return r.a.createElement("div",{className:"RoomBuildMenu"},Array.from(e.roomTypeList).map((function(t){return r.a.createElement(O,{key:t,clickHandler:e.clickHandler,roomType:t,roomName:"Foo"},t)})))}),T=function(e){var t=a.useState(null),n=Object(s.a)(t,2),r=n[0],o=n[1];return a.createElement("div",{className:"newRoomButton"},a.createElement("button",{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)}},"+"),a.createElement(k.a,{id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:function(){o(null)}},a.createElement(j,{roomTypeList:e.roomTypeList,clickHandler:e.clickHandler})))},N=(n(55),n(20)),S=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={number:n.props.number,rooms:Array(),_id:n.props._id,showMenu:!1},n.toggleMenu=function(){n.state.showMenu?n.setState({showMenu:!1}):n.setState({showMenu:!0})},n.componentDidMount=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.getFloorRooms(n.state._id);case 2:t=e.sent,console.log("Rooms Obj"),console.log(t),n.setState({rooms:t.data[0].rooms});case 6:case"end":return e.stop()}}),e)}))),n.addRoom=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 0,0,0,e.next=5,N.buildRoomOnFloor(n.props.towerName,n.state._id,t,a,0,0,0);case 5:return r=e.sent,console.log(r),e.next=9,N.getFloorRooms(n.state._id);case 9:o=e.sent,console.log("New Floor Obj"),console.log(o),n.setState({rooms:o.data[0].rooms}),n.props.updateGameState();case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return a.createElement("div",{className:"floor"},a.createElement("div",{className:"rooms"},this.state.rooms.map((function(t){return a.createElement(E,{name:t.name,type:t.type,tenants:t.tenants,floorId:e.state._id,_id:t._id,happiness:t.happiness,rent:t.rent,maintenance:t.maintenance,key:t._id})}))),a.createElement(T,{roomTypeList:this.props.availableRoomTypes,clickHandler:this.addRoom}))}}]),t}(a.Component),x=(n(73),n(74),function(e){return a.createElement("button",{className:"newFloorButton",onClick:e.onClick},a.createElement("span",{className:"tooltiptext"},"Click to build a new floor for $100,000"))}),C=n(36),M=(n(33),function(e){var t=(7*e.towerHeight-6).toString()+"em",n=(e.towerHeight,Object(a.useState)(!1)),o=Object(s.a)(n,2),c=o[0],i=o[1],l=Object(v.b)({config:{friction:300},bottom:c?t:"1em"});return r.a.createElement("div",null,r.a.createElement(v.a.div,{onClick:function(){return i(!c)},className:"elevatorCar",style:l}))}),R=(C.a.div({hidden:{bottom:0,transition:{duration:5e3}},visible:{bottom:2500,transition:{duration:5e3}}}),function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={isVisible:!0},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){this.state.isVisible;return r.a.createElement("div",{className:"left"===this.props.position?"leftElevator":"rightElevator"},r.a.createElement(M,{towerHeight:this.props.towerHeight}))}}]),t}(r.a.Component)),A=n(20),H=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={floors:Array(),name:n.props.name,money:0,floorsAdded:!1},n.addFloor=Object(u.a)(l.a.mark((function e(){var t,a,r,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.state.floors.length<20)){e.next=19;break}return console.log(n.state.floors.length),t=n.state.floors[n.state.floors.length-1],console.log(t),a=t?t.number+1:0,r=Array(),e.next=8,A.buildFloor(n.state.name,a);case 8:o=e.sent,console.log("Tower Json..."),console.log(o),c=o.data.floors[o.data.floors.length-1],console.log(c),n.state.floors.forEach((function(e){r.push(e)})),r.push(c),n.handleUpdateGameState(),n.setState({floors:r}),e.next=20;break;case 19:alert("You can't build any higher because you'd block some NIMBY's view... or rather you'd 'Change the character of the neighborhood'. Game over.");case 20:case"end":return e.stop()}}),e)}))),n.handleAddFloor=function(){console.log(Object(y.a)(n)),n.addFloor()},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getTower(this.state.name);case 2:t=e.sent,n=Array(),t.data[0].floors&&(console.log(t.data[0].floors),t.data[0].floors.forEach((function(e){n.push(e)}))),console.log(n),n=n.sort((function(e,t){return e.number-t.number})),console.log(n),this.setState({floors:n});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleUpdateGameState",value:function(){this.props.updateGameState()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"outerTower"},r.a.createElement(x,{onClick:this.addFloor}),r.a.createElement("div",{className:"innerTower"},r.a.createElement(R,{towerHeight:this.state.floors.length,position:"left",clickHandler:function(){}}),r.a.createElement("div",{className:"floors"},this.state.floors.map((function(t){return r.a.createElement(S,{key:t.number,availableRoomTypes:e.props.availableRoomTypes,number:t.number,_id:t._id,towerName:e.state.name,updateGameState:e.props.updateGameState})}))),r.a.createElement(R,{towerHeight:this.state.floors.length,position:"right",clickHandler:function(){}})))}}]),t}(r.a.Component),F=n(20),L=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={money:1e5,towerName:n.props.towerName,starLevel:1,happiness:50,population:0,availableRoomTypes:new Set},n.updateGameState=Object(u.a)(l.a.mark((function e(){var t,a,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.getPopulation(n.state.towerName);case 2:return t=e.sent,e.next=5,F.getMoney(n.state.towerName);case 5:a=e.sent,console.log(t.data),r=n.getStarLevel(t.data),o=n.getAvailableRooms(r),n.setState({population:t.data,money:a.data,starLevel:r,availableRoomTypes:o});case 10:case"end":return e.stop()}}),e)}))),n.endMonth=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.endMonth(n.state.towerName);case 2:return e.sent,e.next=5,n.updateGameState();case 5:e.sent;case 6:case"end":return e.stop()}}),e)}))),n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"getAvailableRooms",value:function(e){var t=new Set;return t.add("apartment"),t.add("office"),e>1&&(t.add("condo"),t.add("restaurant")),e>2&&(t.add("hotel"),t.add("cleaning")),e>3&&t.add("test"),t}},{key:"getStarLevel",value:function(e){var t=1;return e>200&&(t=2),e>500&&(t=3),e>1e3&&(t=4),e>2e3&&(t=5),t}},{key:"componentDidMount",value:function(){this.updateGameState()}},{key:"render",value:function(){return a.createElement("div",{className:"game"},a.createElement(w,{gameState:this.state,endMonthHandler:this.endMonth}),a.createElement(H,{availableRoomTypes:this.state.availableRoomTypes,name:this.state.towerName,updateGameState:this.updateGameState}))}}]),t}(a.Component),G=(n(34),function(e){return r.a.createElement("p",{className:"towerListItem",onClick:function(){console.log("tli getting called"),e.onClick(e.name)}},e.name)}),_=n(20),B=function(e){var t=Object(a.useState)(),n=Object(s.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)(),l=Object(s.a)(i,2),u=l[0],m=l[1];Object(a.useEffect)((function(){_.loadTowers().then((function(e){var t=Array();e.data.forEach((function(e){t.push(e.name)})),c(t)}))}));var p=function(t){e.selectTower(t)};return o?r.a.createElement("div",{className:"towerSelectContainer"},r.a.createElement("div",{className:"towerSelect"},r.a.createElement("p",{className:"instructions"},"Click a tower name to load that tower"),o.map((function(e){return r.a.createElement(G,{name:e,onClick:p})}))),r.a.createElement("div",null,r.a.createElement("input",{className:"towerListEntry",value:u,onChange:function(e){m(e.target.value)},name:"newTowerName",type:"text",placeholder:"Type a new Tower Name here",id:"tower"}),r.a.createElement("div",null,r.a.createElement("button",{className:"towerListButton",onClick:function(){var t=u;_.createTower(t).then((function(){e.selectTower(t)}))}},"Create a New Tower")))):r.a.createElement("div",{className:"towerSelect"})},I=(n(20),function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(),i=Object(s.a)(c,2),l=i[0],u=i[1];return n?r.a.createElement("div",{className:"appTower"},r.a.createElement(L,{towerName:l})):r.a.createElement("div",{className:"App"},r.a.createElement(B,{selectTower:function(e){console.log("selection:"),console.log(e),u(e),o(!0)}}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[38,1,2]]]);
//# sourceMappingURL=main.1cbd1b7e.chunk.js.map